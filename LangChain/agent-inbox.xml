<?xml version="1.0"?>
<Container version="2">
  <Name>Agent-Inbox</Name>
  <Repository>ghcr.io/ryan-haver/agent-inbox:latest</Repository>
  <Registry>https://github.com/ryan-haver/agent-inbox/pkgs/container/agent-inbox</Registry>
  <Network>bridge</Network>
  <MyIP/>
  <Shell>sh</Shell>
  <Privileged>false</Privileged>
  <Support>https://github.com/ryan-haver/agent-inbox</Support>
  <Project>https://github.com/langchain-ai/agent-inbox</Project>
  <Overview>Agent Inbox - Modern web interface for managing LangGraph agents and the Executive AI Assistant.

Beautiful, intuitive UI for reviewing AI-drafted emails, approving agent actions, and managing human-in-the-loop workflows with your LangGraph agents.

**QUICK START:**

1. **Install Executive AI Assistant** (if you haven't already)
   - Deploy from Community Apps
   - Complete Gmail OAuth setup via http://YOUR_IP:2025/setup
   - Verify running on port 2024

2. **Install Agent Inbox**
   - Set Web UI Port (default 3000, or use 3006)
   - Click "Apply"
   - Access at http://YOUR_UNRAID_IP:[YOUR_PORT]

3. **Configure in Browser** (Settings in sidebar)
   - Add LangSmith API key: https://smith.langchain.com/settings
   - Create inbox: "Add Inbox" button
   - Set Deployment URL: http://YOUR_UNRAID_IP:2024
   - Set Assistant ID: email_assistant (check langgraph.json if different)
   - Give it a name (e.g., "My Email Assistant")

4. **Start Using**
   - Review email drafts from Executive AI Assistant
   - Edit and approve responses
   - Manage agent interrupts and decisions

**STORAGE OPTIONS:**

**Browser-Only (Default):**
- ‚úÖ Zero configuration - works immediately
- ‚úÖ No volumes needed - completely stateless
- ‚úÖ Maximum privacy - no server-side data
- ‚ö†Ô∏è Config lost if browser cache cleared
- ‚ö†Ô∏è Each device needs separate setup

**Server-Side Storage (Optional):**
- ‚úÖ Multi-device sync (phone, tablet, laptop)
- ‚úÖ Survives browser cache clear
- ‚úÖ Pre-configure inboxes via environment variables
- ‚ö†Ô∏è Requires volume mapping: /mnt/user/appdata/agent-inbox
- ‚ö†Ô∏è Set "Enable Server Storage" to true

**KEY FEATURES:**
- üìß Review and approve AI email drafts
- ‚úèÔ∏è Edit agent responses before sending
- üí¨ Answer agent questions in real-time
- üéØ Manage multiple agents from one interface
- üîÑ Real-time sync with LangGraph deployments
- üíæ Optional persistent storage for multi-device use

**CRITICAL NOTES:**
- Configuration stored in BROWSER only (unless server storage enabled)
- Clearing browser cache/cookies DELETES all your configuration
- To backup: F12 ‚Üí Application ‚Üí Local Storage ‚Üí Copy values
- Container logs show port 3000 (internal) - use YOUR mapped port to access

**TROUBLESHOOTING:**

Can't connect to Executive AI Assistant:
- Verify it's running: docker ps | grep executive-ai-assistant
- Test in browser: http://YOUR_UNRAID_IP:2024 (should see JSON)
- Use Unraid IP, not localhost or container name
- Format: http://IP:2024 (no trailing slash)

No interrupts appearing:
- Check Executive AI logs: docker logs executive-ai-assistant
- Verify Gmail OAuth configured correctly
- Check graph ID matches langgraph.json (usually email_assistant)

Configuration not saving:
- Enable cookies/local storage in browser
- Check browser console (F12) for errors
- Don't clear browser data for this domain

**LINKS:**
- LangSmith API Keys: https://smith.langchain.com/settings
- GitHub: https://github.com/langchain-ai/agent-inbox
- LangGraph Docs: https://langchain-ai.github.io/langgraph/</Overview>
  <Category>Productivity: Tools:</Category>
  <WebUI>http://[IP]:[PORT:3000]</WebUI>
  <TemplateURL>https://raw.githubusercontent.com/ryan-haver/unraid-docker-templates/main/LangChain/agent-inbox.xml</TemplateURL>
  <Icon>https://python.langchain.com/img/brand/wordmark.png</Icon>
  <ExtraParams>--restart=unless-stopped</ExtraParams>
  <PostArgs/>
  <CPUset/>
  <DateInstalled/>
  <DonateText/>
  <DonateLink/>
  <Description>Modern web interface for managing human-in-the-loop interactions with LangGraph agents and the Executive AI Assistant. Stateless design with browser-based configuration.</Description>
  <Networking>
    <Mode>bridge</Mode>
    <Publish>
      <Port>
        <HostPort>3000</HostPort>
        <ContainerPort>3000</ContainerPort>
        <Protocol>tcp</Protocol>
      </Port>
    </Publish>
  </Networking>
  <Data/>
  <Labels/>
  
  <!-- Port Configuration -->
  <Config Name="Web UI Port" Target="3000" Default="3000" Mode="tcp" Description="Port for accessing the web interface. Example: 3006 to access at http://YOUR_IP:3006. Container internal port is always 3000, but you can map to any external port. Container logs will display your mapped port for convenience." Type="Port" Display="always" Required="true" Mask="false">3000</Config>
  
  <!-- Optional Environment Variables -->
  <Config Name="Host Port (Optional)" Target="HOST_PORT" Default="" Mode="" Description="OPTIONAL: Override for log messages. Set to match 'Web UI Port' above for accurate startup logs. Example: If Web UI Port is 3006, set this to 3006. Auto-detected if left empty. Only affects log display, not functionality." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  
  <Config Name="Node Environment" Target="NODE_ENV" Default="production" Mode="" Description="Runtime environment mode. Use 'production' for normal operation (optimized, faster). Use 'development' only for debugging (slower, verbose logging). Default: production" Type="Variable" Display="advanced" Required="false" Mask="false">production</Config>
  
  <Config Name="Disable Telemetry" Target="NEXT_TELEMETRY_DISABLED" Default="1" Mode="" Description="Controls Next.js anonymous usage statistics. Set to 1 to disable telemetry (recommended for privacy). Set to 0 to help Next.js team with anonymous metrics. Default: 1 (disabled)" Type="Variable" Display="advanced" Required="false" Mask="false">1</Config>
  
  <!-- Reverse Proxy Configuration -->
  <Config Name="LangGraph API URL (Build-Time)" Target="NEXT_PUBLIC_LANGGRAPH_API_URL" Default="" Mode="" Description="ADVANCED: Hard-code LangGraph API URL at build time. Example: http://192.168.1.110:2024. Leave EMPTY (recommended) to configure in browser UI instead. WARNING: Requires container rebuild to change - not runtime configurable." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  
  <Config Name="Base Path (Reverse Proxy)" Target="NEXT_PUBLIC_BASE_PATH" Default="" Mode="" Description="REVERSE PROXY ONLY: URL path prefix for subpath deployments. Example: /inbox serves UI at https://example.com/inbox/. Leave EMPTY for root domain (https://inbox.example.com/). WARNING: Requires container rebuild to change." Type="Variable" Display="advanced" Required="false" Mask="false"/>
  
  <!-- ========================================================================= -->
  <!-- PERSISTENT STORAGE CONFIGURATION (Optional Feature)                      -->
  <!-- ========================================================================= -->
  <!-- By default, Agent Inbox stores everything in BROWSER localStorage only.  -->
  <!-- Enable server storage for multi-device sync and backup capabilities.     -->
  <!-- ========================================================================= -->
  
  <Config Name="Enable Server Storage" Target="USE_SERVER_STORAGE" Default="false" Mode="" Description="Enable server-side configuration sync. When true, configuration syncs between browser and /app/data/config.json, allowing multi-device access and surviving browser cache clears. Requires 'Config Storage Path' volume below. Example: true for multi-device, false for browser-only. Default: false" Type="Variable" Display="advanced" Required="false" Mask="false">false</Config>
  
  <!-- Pre-configuration via Environment Variables (Optional) -->
  <Config Name="Auto-Create Default Inbox" Target="DEFAULT_INBOX_ENABLED" Default="false" Mode="" Description="ADVANCED: Automatically create pre-configured inbox on first launch. Useful for deployment automation or shared setups. Requires DEFAULT_INBOX_NAME, DEFAULT_DEPLOYMENT_URL, and DEFAULT_ASSISTANT_ID below. Only works when server storage enabled. Example: true. Default: false" Type="Variable" Display="advanced-hide" Required="false" Mask="false">false</Config>
  
  <Config Name="Default Inbox Name" Target="DEFAULT_INBOX_NAME" Default="Default Inbox" Mode="" Description="Display name for auto-created inbox. Example: 'My Email Assistant' or 'Production Agent'. Only used when 'Auto-Create Default Inbox' is true. Default: Default Inbox" Type="Variable" Display="advanced-hide" Required="false" Mask="false">Default Inbox</Config>
  
  <Config Name="Default Deployment URL" Target="DEFAULT_DEPLOYMENT_URL" Default="" Mode="" Description="LangGraph API URL for auto-created inbox. Example: http://192.168.1.110:2024 or http://executive-ai-assistant:2024. Must be accessible from browser. Only used when 'Auto-Create Default Inbox' is true. Default: (empty)" Type="Variable" Display="advanced-hide" Required="false" Mask="false"/>
  
  <Config Name="Default Assistant/Graph ID" Target="DEFAULT_ASSISTANT_ID" Default="email_assistant" Mode="" Description="Graph name from langgraph.json for auto-created inbox. Example: 'email_assistant' (Executive AI), 'main', or 'cron'. Check your LangGraph deployment's langgraph.json. Only used when 'Auto-Create Default Inbox' is true. Default: email_assistant" Type="Variable" Display="advanced-hide" Required="false" Mask="false">email_assistant</Config>
  
  <Config Name="Additional Inboxes (JSON Array)" Target="ADDITIONAL_INBOXES" Default="" Mode="" Description="ADVANCED: Pre-configure multiple inboxes via JSON array. Example: [{'id':'inbox2','name':'Calendar Agent','deploymentUrl':'http://192.168.1.110:2025','assistantId':'calendar'}]. Only used when server storage enabled. Requires valid JSON syntax. Default: (empty)" Type="Variable" Display="advanced-hide" Required="false" Mask="false"/>
  
  <Config Name="Pre-Configure LangSmith Key" Target="LANGSMITH_API_KEY" Default="" Mode="" Description="ADVANCED: Pre-populate LangSmith API key via environment variable. Get from https://smith.langchain.com/settings (starts with lsv2_pt_). Only used when server storage enabled. WARNING: Less secure than browser UI entry - use for automation only. Default: (empty, configure in UI)" Type="Variable" Display="advanced-hide" Required="false" Mask="true"/>
  
  <!-- Persistent Storage Volume (Optional) -->
  <Config Name="Config Storage Path (Optional)" Target="/app/data" Default="" Mode="rw" Description="OPTIONAL: Host directory for persistent config.json storage. Example: /mnt/user/appdata/agent-inbox. Leave EMPTY for browser-only mode (default, stateless). Required when 'Enable Server Storage' is true. Config syncs here for backup/multi-device access." Type="Path" Display="advanced" Required="false" Mask="false"/>
  
  <!-- Note: Configuration done in browser UI, not via environment variables -->
</Container>
